---
summary: 为 AdonisJS 项目做贡献是回馈社区的好方法。本指南概述了如何为任何 AdonisJS 项目做出贡献。
---

# 贡献 (Contributing)

这是针对所有 AdonisJS 仓库的通用贡献指南。在向任何仓库做贡献之前，请仔细阅读本指南 🙏

代码并不是唯一的贡献方式。以下也是一些贡献并成为社区一部分的方法：

* 修正文档中的拼写错误
* 改进现有文档
* 编写“食谱”（Cookbooks）或博客文章来培训社区中的其他人
* 对问题进行分类 (Triaging issues)
* 在现有问题上分享您的意见
* 在 Discord 和讨论区 (discussions forum) 帮助社区

## 报告 Bug (Reporting bugs)

许多在开源项目中报告的问题通常是提问者那端的问题或配置错误。因此，我们强烈建议您在报告问题之前正确地对问题进行故障排除。

如果您要报告一个 bug，请尽量包含尽可能多的信息以及您编写的代码示例。问题的质量高低如下所示：

* **完美的问题 (PERFECT ISSUE)：** 您隔离了底层的 bug。在仓库中创建一个失败的测试，并围绕它开启一个 Github issue。
* **好的问题 (GOOD ISSUE)：** 您隔离了底层的 bug，并将其作为一个 Github 仓库提供最小复现。Antfu 写了一篇很棒的文章关于[为什么需要复现 (Why Reproductions are Required)](https://antfu.me/posts/why-reproductions-are-required)。
* **像样的问题 (DECENT ISSUE)：** 您正确地陈述了您的问题。分享了最初产生该问题的代码。此外，包含相关的配置文件和您使用的包版本。最后但同样重要的是，遵循 Github markdown 语法指南正确格式化每个代码块。
* **糟糕的问题 (POOR ISSUE)：** 您只是抛出您的问题，希望其他人会问相关的问题来帮助您。这类问题会被自动关闭，不作任何解释。

## 进行讨论 (Having a discussion)

您经常想要讨论一个话题或分享一些想法。在这种情况下，请在讨论区 (discussions forum) 的 💡Ideas 类别下创建一个讨论。

## 培训他人 (Educating others)

培训他人是为任何社区做贡献并获得认可的最佳方式之一。

您可以使用我们讨论区上的 📚 Cookbooks 类别与他人分享文章。Cookbooks 部分**不受**严格审核，只要分享的知识与项目相关即可。

## 创建 Pull Requests (Creating pull requests)

在投入大量时间和精力编写代码后，如果您的 Pull Request 被拒绝，这绝不是一种好的体验。因此，我们强烈建议您在开始任何新工作之前先发起讨论。

只需开始一个讨论并解释您计划贡献什么？

* **您是否试图创建一个 PR 来修复 bug：** 一旦 bug 被确认，针对 bug 的 PR 大多会被接受。
* **您是否计划添加新功能：** 请详细解释为什么需要此功能，并分享我们可以阅读的学习材料链接以进行自我教育。例如：如果您要向 Japa 或 AdonisJS 添加对快照测试的支持，请分享我可以用来了解更多关于一般快照测试的链接。

**注意：** 您还应该能够开启额外的 PR 来记录所贡献的功能或改进。

## 仓库设置 (Repository setup)

首先将仓库克隆到您的本地机器。

```sh
git clone <REPO_URL>
````

在本地安装依赖项。请不要随功能请求一起更新任何依赖项。如果您发现陈旧的依赖项，请创建一个单独的 PR 来更新它们。

我们使用 `npm` 来管理依赖项，因此请勿使用 `yarn` 或任何其他工具。

```sh
npm install
```

通过执行以下命令运行测试。

```sh
npm test
```

## 使用的工具 (Tools in use)

以下是正在使用的工具列表。

| 工具 | 用途 |
| :--- | :--- |
| **TypeScript** | 所有仓库均是用 TypeScript 编写的。编译后的 JavaScript 和类型定义发布在 npm 上。 |
| **TS Node** | 我们使用 `ts-node` 在不编译 TypeScript 的情况下运行测试或脚本。`ts-node` 的主要目标是在开发过程中拥有更快的反馈循环。 |
| **SWC** | SWC 是一个基于 Rust 的 TypeScript 编译器。TS Node 对使用 SWC 替代 TypeScript 官方编译器提供了一流的支持。使用 SWC 的主要原因是为了获得速度提升。 |
| **Release-It** | 我们使用 `release-it` 将我们的包发布到 npm 上。它完成了创建发布版本并将其发布到 npm 和 Github 上的所有繁重工作。其配置定义在 `package.json` 文件中。 |
| **ESLint** | ESLint 帮助我们在拥有多个贡献者的所有仓库中强制执行一致的编码风格。我们所有的 ESLint 规则都发布在 `eslint-plugin-adonis` 包下。 |
| **Prettier** | 我们使用 prettier 来格式化代码库以获得一致的视觉输出。如果您对为什么我们同时使用 ESLint 和 Prettier 感到困惑，请阅读 Prettier 网站上的 [Prettier vs. Linters](https://prettier.io/docs/en/comparison.html) 文档。 |
| **EditorConfig** | 每个项目根目录下的 `.editorconfig` 文件配置您的代码编辑器，以使用一组缩进和空格管理规则。同样，Prettier 用于代码的后期格式化，而 Editorconfig 用于预先配置编辑器。 |
| **Conventional Changelog** | 所有仓库的所有提交都使用 `commitlint` 来强制执行一致的提交信息。 |
| **Husky** | 我们使用 `husky` 在提交代码时强制执行提交约定。Husky 是一个用 Node 编写的 git 钩子系统。 |

### 命令 (Commands)

| 命令 | 描述 |
| :--- | :--- |
| `npm run test` | 使用 `ts-node` 运行项目测试 |
| `npm run compile` | 将 TypeScript 项目编译为 JavaScript。编译后的输出写入 `build` 目录内 |
| `npm run release` | 使用 `np` 启动发布流程 |
| `npm run lint` | 使用 ESlint 检查代码库 |
| `npm run format` | 使用 Prettier 格式化代码库 |
| `npm run sync-labels` | 将 `.github/labels.json` 文件内定义的标签与 Github 同步。此命令仅供项目管理员使用。 |

## 编码风格 (Coding style)

我们所有的项目都是用 TypeScript 编写的，并且正在向纯 ESM 迁移。

  * 您可以在[这里](https://www.google.com/search?q=https://github.com/poppinss/coding-style)了解更多关于编码风格。
  * 在[这里](https://www.google.com/search?q=https://github.com/poppinss/coding-style/blob/master/docs/ts-esm-setup.md)查看用于 ESM 和 TypeScript 的设置。

此外，请确保在推送代码之前运行以下命令。

```sh
# 使用 prettier 格式化
npm run format

# 使用 Eslint 进行 Lint 检查
npm run lint
```

## 获得贡献者认可 (Getting recognized as a contributor)

我们依靠 GitHub 在仓库的右侧面板中列出所有仓库贡献者。以下是相同的示例。

此外，我们使用 Github 的自动生成发布说明功能，该功能会在发布说明中添加对贡献者个人资料的引用。
